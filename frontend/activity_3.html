<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gratitude Reflection</title>
  <link rel="stylesheet" href="assets/css/activities.css" />
</head>
<body>
  <header>
    <h1>Gratitude Reflection</h1>
    <a href="activities.html">Back</a>
  </header>

  <main>
    <p>List three things you are grateful for today:</p>
    <input id="g1" placeholder="First thing..." /><br/>
    <input id="g2" placeholder="Second thing..." /><br/>
    <input id="g3" placeholder="Third thing..." /><br/>
    <button id="saveGratitude">Save Reflection</button>
    <p id="status"></p>
  </main>

  <script type="module">
    import { getAuth } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    const db = getFirestore();
    const saveBtn = document.getElementById("saveGratitude");
    const status = document.getElementById("status");

    saveBtn.onclick = async () => {
      const user = getAuth().currentUser;
      if (!user) {
        status.textContent = "Please login first!";
        return;
      }
      const items = [document.getElementById("g1").value, document.getElementById("g2").value, document.getElementById("g3").value];
      await addDoc(collection(db, "gratitude"), {
        userId: user.uid,
        items,
        ts: new Date().toISOString()
      });
      status.textContent = "Gratitude reflection saved!";
    };
  </script>
</body>
</html>