<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mindful Journaling</title>
  <link rel="stylesheet" href="assets/css/activities.css" />
</head>
<body>
  <header>
    <h1>Mindful Journaling</h1>
    <a href="activities.html">Back</a>
  </header>

  <main>
    <p>Write down your thoughts and emotions to gain clarity.</p>
    <textarea id="journalEntry" rows="8" cols="50" placeholder="Start writing here..."></textarea>
    <button id="saveJournal">Save Entry</button>
    <p id="status"></p>
  </main>

  <script type="module">
    import { getAuth } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    const db = getFirestore();
    const saveBtn = document.getElementById("saveJournal");
    const status = document.getElementById("status");

    saveBtn.onclick = async () => {
      const user = getAuth().currentUser;
      if (!user) {
        status.textContent = "Please login first!";
        return;
      }
      const text = document.getElementById("journalEntry").value;
      await addDoc(collection(db, "journals"), {
        userId: user.uid,
        text,
        ts: new Date().toISOString()
      });
      status.textContent = "Journal entry saved!";
    };
  </script>
</body>
</html>